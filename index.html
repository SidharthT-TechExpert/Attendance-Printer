<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attendance App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="Img/logo.webp" rel="icon">
  <style>
    :root {
      --primary-color: #004d61;
      /* Dark teal */
      --secondary-color: #00b7c2;
      /* Light aqua */
      --accent-color: #f4f7f9;
    }

    body {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      min-height: 100vh;
    }

    header {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 10px 0;
    }

    .container-box {
      background: #ffffff;
      color: #333;
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
      padding: 20px;
      animation: fadeIn 0.4s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .person {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--accent-color);
      padding: 10px 14px;
      margin-bottom: 8px;
      border-radius: 10px;
      border: 1px solid #e0e0e0;
      transition: 0.2s;
    }

    .person:hover {
      background: #e3f7f9;
      transform: translateY(-2px);
    }

    .rp-row {
      background: #d1f0ff !important;
      border-left: 5px solid #00aaff;
    }

    #output {
      height: 220px;
      resize: none;
      background: #f8f9fa;
      border-radius: 10px;
    }

    .btn-custom {
      background-color: var(--secondary-color);
      border: none;
    }

    .btn-custom:hover {
      background-color: #0094a3;
    }

    input[type="checkbox"] {
      transform: scale(1.5);
      /* Increase size */
      margin-right: 5px;
      /* Space from label */
      cursor: pointer;
    }

    .form-check-input {
      width: 2rem;
      height: 1rem;
      cursor: pointer;
    }

    .copy-btn {
      background: linear-gradient(90deg, #ff7e5f, #feb47b);
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      background: linear-gradient(90deg, #feb47b, #ff7e5f);
      transform: scale(1.05);
      box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* Keep checkbox normal size */
    .custom-tooltip {
      position: relative;
      cursor: pointer;
    }

    /* Tooltip base - 3x smaller text and padding */
    .custom-tooltip::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      padding: 2px 4px;
      /* Smaller padding */
      border-radius: 4px;
      white-space: nowrap;
      font-size: 0.6rem;
      /* Smaller text size */
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.3s ease;
      box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.2);
      z-index: 999;
      color: #fff;
    }

    /* Tooltip arrow - smaller */
    .custom-tooltip::before {
      content: "";
      position: absolute;
      bottom: 115%;
      left: 50%;
      transform: translateX(-50%);
      border-width: 3px;
      /* Smaller arrow */
      border-style: solid;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    /* Show tooltip on hover */
    .custom-tooltip:hover::after,
    .custom-tooltip:hover::before {
      opacity: 1;
      transform: translateX(-50%) translateY(-2px);
    }

    /* üü® Attending alternative CS */
    .custom-tooltip[data-tooltip="Attending alternative CS"]::after {
      background: linear-gradient(135deg, #ff9800, #ffb74d);
    }

    .custom-tooltip[data-tooltip="Attending alternative CS"]::before {
      border-color: transparent transparent #ff9800 transparent;
    }

    /* ‚ùå Absent */
    .custom-tooltip[data-tooltip="Absent"]::after {
      background: linear-gradient(135deg, #e53935, #ef5350);
    }

    .custom-tooltip[data-tooltip="Absent"]::before {
      border-color: transparent transparent #e53935 transparent;
    }
  </style>
</head>

<body>
  <header class="text-center text-white">
    <h4 class="m-0">Attendance Tracker</h4>
    <small id="currentDate"></small>
  </header>

  <div class="container py-4">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="container-box">
          <div class="p-3 bg-light border rounded mb-3 text-dark">
            ‚úÖ Present: Default <br />
            üü® Alternative CS <br />
            ‚ùå Absent
            <hr>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="group1" name="group" value="group1">
              <label class="form-check-label" for="group1"> Group 1</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="group2" name="group" value="group2">
              <label class="form-check-label" for="group2"> Group 2</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="combined" name="group" value="combined">
              <label class="form-check-label" for="combined"> Combined</label>
            </div>

          </div>
          <div id="list"></div>
          <button class="btn btn-custom w-100 mt-3" onclick="generateOutput()">Generate Output</button>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <span><strong>Output</strong></span>
            <button class="copy-btn" onclick="copyOutput()">üìã Copy</button>
          </div>
          <textarea id="output" class="form-control" style="padding-top: 35px;" readonly></textarea>


        </div>
      </div>
    </div>
  </div>

  <script>
    const Group_1 = [
      "Achyuth J",
      "Adarsh Babu",
      "Aifa Sana Uk",
      "Akhil Joy (Aj)",
      "Aswathy K",
      "Arun Narayan Nair",
      "Chitra Arun (RP)",
      "Christin Johny",
      "Fasalu Rahman",
      "Govind S Kumar",
      "Jagan",
      "Jasima (RP)",
      "Kadeejatu Zaiba",
      "Karthik B",
      "Krishna (RP)",
      "Midhun Manoj",
      "Neethu George",
      "Praveena E S",
      "Riyas Kv (RP)",
      "Sidharth T",
      "Thaskeem J",
      "Visal Vijayan (RP)"
    ];

    const Group_2 = [
      "Ahammed Junaid",
      "Ajnas Muhammed",
      "Akhil",
      "Arshad M",
      "Arun M",
      "Bijo P A",
      "Gowry N",
      "Mohamed Nabeel",
      "Muhammed Shibili K",
      "Reuben Varghese",
      "Sarath A",
      "Muhammed Shibili.k",
      "Solaman KJ",
      "Swagath TV",
      "Tijo Thomas",
      "Eid Bilal",
      "Minto Thomas",
      "Muzammil Muhammed",
      "Anuja Joy (RP)",
      "Anusha (RP)",
      "Aswathi KV (RP)",
      "Fairose (RP)",
      "Minto (RP)",
      "Mubasir (RP)",
      "Najila (RP)",
      "Nazneen (RP)",
      "Sahla (RP)",
      "Shahitha (RP)",
      "Shahna (RP)"
    ];

    const Combined = [...Group_1, ...Group_2];
    const checkboxes = document.querySelectorAll('input[name="group"]');

    let rawNames;
    let displayNames = [];
    let status = {};
    let isRP = {};
    let Group = "";

    // Initialize Bootstrap tooltips
    document.addEventListener("DOMContentLoaded", function () {
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });


    checkboxes.forEach(cb => {
      cb.addEventListener('change', function () {
        if (this.checked) {
          rawNames = this.value === 'group1' ? Group_1 :
            this.value === 'group2' ? Group_2 : Combined;

          Group = this.value === 'group1' ? 'Group 1' :
            this.value === 'group2' ? 'Group 2' : 'Combined';

          displayNames = [];
          status = {};
          isRP = {};

          displayNames = rawNames
            .filter((n) => {
              if (n.includes("(RP)")) {
                const cleanName = n.replace(" (RP)", "");
                isRP[cleanName] = true;
                status[cleanName] = "RP";
                return false;
              }
              return true;
            })
            .map((n) => {
              status[n] = "present";
              return n;
            });

          renderList();

          checkboxes.forEach(other => {
            if (other !== this) other.checked = false;
          });
        }
      });
    });

    function renderList() {
      const listDiv = document.getElementById("list");
      listDiv.innerHTML = "";

      displayNames.sort((a, b) => a.localeCompare(b)).forEach((name) => {
        const div = document.createElement("div");
        div.className = "person" + (isRP[name] ? " rp-row" : "");
        div.innerHTML = `
      <span class="name">${name}</span>
      <div class="d-flex gap-2">
          <input type="checkbox" class="custom-tooltip" data-tooltip="Attending alternative CS" onchange="mark('${name}','other',this)"> üü®
          <input type="checkbox" class="custom-tooltip" data-tooltip="Absent" onchange="mark('${name}','absent',this)"> ‚ùå
     </div>
    `;
        listDiv.appendChild(div);
      });
    }

    function mark(name, state, checkbox) {
      const cbs = document.querySelectorAll(
        `.person input[onchange*="'${name}'"]`
      );
      cbs.forEach(cb => {
        if (cb !== checkbox) cb.checked = false;
      });
      status[name] = checkbox.checked ? state : "present";
    }


    function generateOutput() {
      const Mean = 'üìí COMMUNICATION SESSION REPORT';
      const Batch = " BCR71";
      const date = formatDate(new Date());
      const GroupName = Group;
      const Time = ' 11:30Am - 12:30Pm';
      const Coordinators = Group === 'Group 1' ? " Arun Narayan Nair & Jagan" : Group === 'Group 2' ? " Muhammed Shibili K & Ajnas Muhammed" : ' Arun Narayan Nair & Muhammed Shibili K $ Ajnas Muhammed';
      const Trainer = " Afzal Nazar";
      const Duck = "üî∑üî∑üî∑üî∑üî∑üî∑üî∑üî∑üî∑üî∑üî∑";

      const Detalis = `${Duck}\n${Mean} \nüéì Batch :${Batch} ${GroupName} \nüìÖ Date :${date}\n‚è∞ Time :${Time} \nüë®üèª‚Äçüè´ Trainer :${Trainer}\nüë´ Coordinators :${Coordinators}\n${Duck}\n\n`;
      const Report = '‚ôª Session Overview:\n';

      const presentees =
        `\n\nüü© Presentees\n\n` +
        Object.keys(status)
          .filter((n) => status[n] === "present")
          .map((n) => `‚úÖ ${n}`)
          .join("\n");

      const other =
        "\n\nüü® Attending alternative cs\n\n" +
        Object.keys(status)
          .filter((n) => status[n] === "other")
          .map((n) => `‚òëÔ∏è ${n}`)
          .join("\n");

      let count = 1;
      const absentees =
        "\n\n‚ùå Absentees ‚ùå\n\n" +
        Object.keys(status)
          .filter((n) => status[n] === "absent")
          .map((n) => `${count++}. ${n}`)
          .join("\n");

      count = 1;
      const RP =
        "\n\nüîÉ Refresh Period üîÉ\n\n" +
        Object.keys(status)
          .filter((n) => status[n] === "RP")
          .map((n) => `${count++}. ${n}`)
          .join("\n");

      const link = `\n\nüîó Link: \n   Tldv:\n   Meet list:\n\n ‚úç Report By : `

      document.getElementById("output").value =
        Detalis + Report + presentees + other + absentees + RP + link;
    }

    function formatDate(date) {
      const day = String(date.getDate()).padStart(2, '0');
      const month = date.toLocaleString('en-US', { month: 'short' });
      const year = date.getFullYear();
      return `${day} ${month} ${year}`;
    }

    function copyOutput() {
      const output = document.getElementById("output");
      navigator.clipboard.writeText(output.value)
        .then(() => {
          const btn = document.querySelector(".copy-btn");
          btn.innerText = "‚úÖ Copied!";
          setTimeout(() => btn.innerText = "üìã Copy", 2000);
        })
        .catch(err => {
          console.error("Failed to copy: ", err);
        });
    }



    document.getElementById("currentDate").innerText = formatDate(new Date());
  </script>
</body>

</html>